<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MotionStation APP 原型</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            background-color: #f3f4f6;
        }
        /* 自定义滚动条 */
        .mobile-screen::-webkit-scrollbar {
            width: 4px;
        }
        .mobile-screen::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 2px;
        }
        /* 隐藏 input[type=radio] 和 input[type=checkbox] 的默认样式 */
        .hidden-input {
            opacity: 0;
            position: absolute;
            width: 0;
            height: 0;
        }
        /* 自定义 Checkbox 和 Radio 选中样式 */
        .hidden-input:checked + div {
            border-color: #2563eb;
            background-color: #eff6ff;
            color: #1d4ed8;
        }
        /* 页面切换动画 */
        .page {
            display: none; /* 默认隐藏 */
            animation: fadeIn 0.3s ease-in-out;
        }
        .page.active {
            display: flex; /* 显示 */
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 轮播图样式 */
        .slider-container {
            position: relative;
            overflow: hidden;
        }
        .slider-slide {
            display: none;
            width: 100%;
            animation: fade 1.5s ease-in-out;
        }
        .slider-slide.active {
            display: block;
        }
        @keyframes fade {
            from { opacity: 0.4; }
            to { opacity: 1; }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <!-- 手机模拟器外壳 -->
    <div class="w-full max-w-sm h-[812px] bg-white border-8 border-gray-800 rounded-3xl shadow-2xl overflow-hidden flex flex-col">
        
        <!-- 顶部状态栏 -->
        <div class="flex-shrink-0 h-8 bg-white flex justify-between items-center px-4 pt-2">
            <span class="text-xs font-bold">9:41</span>
            <div class="flex space-x-1">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M12 3l-.01 2.995M18.364 5.636l-2.121 2.121M5.636 18.364l-2.121 2.121M18.364 18.364l-2.121-2.121M5.636 5.636L7.757 7.757m12.728 4.757h-2.995M4.505 12.505H1.51"></path></svg>
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 015.636 5.636m12.728 12.728L5.636 5.636"></path></svg>
                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 13a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm.293-3.293a1 1 0 010-1.414l5-5a1 1 0 011.414 0l5 5a1 1 0 11-1.414 1.414L11 6.414V11a1 1 0 11-2 0V6.414L5.707 9.707a1 1 0 01-1.414 0z"></path></svg>
            </div>
        </div>

        <!-- APP 内容区域 -->
        <div class="flex-1 flex flex-col overflow-y-auto mobile-screen relative">

            <!-- ======================= -->
            <!-- 页面 1: 欢迎页 (P1) -->
            <!-- ======================= -->
            <div id="page-welcome" class="page active flex-col justify-between p-6 h-full">
                <!-- 顶部 Logo -->
                <div class="flex-grow flex items-center justify-center">
                    <div class="w-48 h-48 bg-gray-100 rounded-full flex items-center justify-center">
                        <svg class="w-24 h-24 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 1v4m0 0h-4m4 0l-5-5"></path></svg>
                    </div>
                </div>
                <!-- 底部操作 -->
                <div class="flex-shrink-0">
                    <button onclick="showPage('page-login')" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg hover:bg-blue-700 transition duration-300">
                        登录 / 注册
                    </button>
                    <button onclick="showPage('page-home')" class="w-full text-gray-500 font-medium py-3 px-4 rounded-lg mt-3 hover:bg-gray-100 transition duration-300">
                        游客模式
                    </button>
                    <p class="text-center text-xs text-gray-400 mt-4">切换地区</p>
                </div>
            </div>

            <!-- ======================= -->
            <!-- 页面 2: 登录页 (P2, P3) -->
            <!-- ======================= -->
            <div id="page-login" class="page flex-col p-6 h-full">
                <h1 class="text-3xl font-bold text-gray-900 mt-8">欢迎回来!</h1>
                
                <!-- 登录方式切换 -->
                <div class="my-6 flex border border-gray-200 rounded-lg overflow-hidden">
                    <button id="tab-btn-phone" onclick="toggleLoginMode('phone')" class="flex-1 py-2 text-sm font-medium bg-blue-600 text-white">手机验证码</button>
                    <button id="tab-btn-password" onclick="toggleLoginMode('password')" class="flex-1 py-2 text-sm font-medium text-gray-600 bg-gray-50 hover:bg-gray-100">账号密码</button>
                    <button id="tab-btn-email" onclick="toggleLoginMode('email')" class="flex-1 py-2 text-sm font-medium text-gray-600 bg-gray-50 hover:bg-gray-100">邮箱</button>
                </div>

                <!-- 手机验证码登录 (P3) -->
                <div id="mode-phone" class="space-y-4">
                    <input type="tel" placeholder="请输入手机号" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div class="flex space-x-2">
                        <input type="text" placeholder="请输入验证码" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button id="btn-get-code" onclick="startCountdown(this)" class="flex-shrink-0 w-32 bg-gray-200 text-gray-700 text-sm font-medium py-3 px-2 rounded-lg hover:bg-gray-300">获取验证码</button>
                    </div>
                </div>

                <!-- 账号密码登录 (P2) -->
                <div id="mode-password" class="space-y-4 hidden">
                    <input type="text" placeholder="请输入手机号/邮箱" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <input type="password" placeholder="请输入密码" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- 邮箱登录/注册 (P5) -->
                <div id="mode-email" class="space-y-4 hidden">
                    <input type="email" placeholder="请输入邮箱" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div class="flex space-x-2">
                        <input type="text" placeholder="请输入验证码" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button onclick="startCountdown(this)" class="flex-shrink-0 w-32 bg-gray-200 text-gray-700 text-sm font-medium py-3 px-2 rounded-lg hover:bg-gray-300">获取验证码</button>
                    </div>
                </div>

                <div class="flex justify-between items-center mt-4">
                    <a onclick="showPage('page-forgot')" class="text-sm text-blue-600 hover:underline cursor-pointer">忘记密码?</a>
                    <a onclick="showPage('page-register')" class="text-sm text-blue-600 hover:underline cursor-pointer">立即注册</a>
                </div>

                <button onclick="login()" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg mt-8 hover:bg-blue-700 transition duration-300">
                    登录
                </button>
                
                <div class="mt-6 flex items-center">
                    <input type="checkbox" id="agree-login" class="hidden-input">
                    <label for="agree-login" class="flex items-center cursor-pointer">
                        <div class="w-4 h-4 border-2 border-gray-300 rounded-sm flex-shrink-0 mr-2 flex items-center justify-center">
                            <svg class="w-3 h-3 text-blue-600 hidden" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>
                        </div>
                        <span class="text-xs text-gray-500">我已阅读并同意 <a href="#" class="text-blue-600">用户协议</a> 和 <a href="#" class="text-blue-600">隐私政策</a></span>
                    </label>
                </div>
                
                <div class="text-center text-gray-400 text-sm my-6">或</div>
                <button class="w-full border border-gray-300 text-gray-700 font-medium py-3 px-4 rounded-lg flex items-center justify-center hover:bg-gray-50">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path></svg>
                    扫码登录 (QR)
                </button>
            </div>
            
            <!-- ======================= -->
            <!-- 页面 3: 注册 - 步骤 1 (P4, P5) -->
            <!-- ======================= -->
            <div id="page-register" class="page flex-col p-6 h-full">
                <svg onclick="showPage('page-login')" class="w-6 h-6 text-gray-500 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                <h1 class="text-3xl font-bold text-gray-900 mt-4">创建账号</h1>
                
                <div class="my-6 flex border border-gray-200 rounded-lg overflow-hidden">
                    <button id="tab-btn-reg-phone" onclick="toggleRegisterMode('phone')" class="flex-1 py-2 text-sm font-medium bg-blue-600 text-white">手机注册</button>
                    <button id="tab-btn-reg-email" onclick="toggleRegisterMode('email')" class="flex-1 py-2 text-sm font-medium text-gray-600 bg-gray-50 hover:bg-gray-100">邮箱注册</button>
                </div>

                <!-- 手机注册 (P4) -->
                <div id="reg-mode-phone" class="space-y-4">
                    <div class="flex">
                        <span class="inline-flex items-center px-3 text-sm text-gray-900 bg-gray-100 border border-r-0 border-gray-300 rounded-l-md">+86</span>
                        <input type="tel" placeholder="请输入手机号" class="flex-1 p-3 border border-gray-300 rounded-r-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="flex space-x-2">
                        <input type="text" placeholder="请输入验证码" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button onclick="startCountdown(this)" class="flex-shrink-0 w-32 bg-gray-200 text-gray-700 text-sm font-medium py-3 px-2 rounded-lg hover:bg-gray-300">获取验证码</button>
                    </div>
                    <input type="password" placeholder="设置密码 (6-20位)" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <!-- 邮箱注册 (P5) -->
                <div id="reg-mode-email" class="space-y-4 hidden">
                    <input type="email" placeholder="请输入邮箱" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div class="flex space-x-2">
                        <input type="text" placeholder="请输入验证码" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button onclick="startCountdown(this)" class="flex-shrink-0 w-32 bg-gray-200 text-gray-700 text-sm font-medium py-3 px-2 rounded-lg hover:bg-gray-300">获取验证码</button>
                    </div>
                    <input type="password" placeholder="设置密码 (6-20位)" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>

                <div class="mt-6 flex items-center">
                    <input type="checkbox" id="agree-register" class="hidden-input">
                    <label for="agree-register" class="flex items-center cursor-pointer">
                        <div class="w-4 h-4 border-2 border-gray-300 rounded-sm flex-shrink-0 mr-2 flex items-center justify-center">
                            <svg class="w-3 h-3 text-blue-600 hidden" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>
                        </div>
                        <span class="text-xs text-gray-500">我已阅读并同意 <a href="#" class="text-blue-600">用户协议</a> 和 <a href="#" class="text-blue-600">隐私政策</a></span>
                    </label>
                </div>
                
                <button onclick="registerStep1()" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg mt-8 hover:bg-blue-700 transition duration-300">
                    下一步
                </button>
            </div>

            <!-- ======================= -->
            <!-- 页面 4: 注册 - 步骤 2 (P6) -->
            <!-- ======================= -->
            <div id="page-register-step2" class="page flex-col p-6 h-full">
                <svg onclick="showPage('page-register')" class="w-6 h-6 text-gray-500 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                <h1 class="text-3xl font-bold text-gray-900 mt-4">完善个人资料</h1>
                <p class="text-gray-500 text-sm mt-2">让我们更了解你</p>
                
                <div class="space-y-4 mt-6 overflow-y-auto">
                    <label class="block">
                        <span class="text-gray-700 font-medium">昵称</span>
                        <input type="text" placeholder="请输入昵称" class="w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </label>
                    <label class="block">
                        <span class="text-gray-700 font-medium">性别</span>
                        <div class="flex space-x-4 mt-2">
                            <label class="flex-1">
                                <input type="radio" name="gender" class="hidden-input" checked>
                                <div class="w-full text-center p-3 border-2 border-gray-300 rounded-lg cursor-pointer font-medium text-gray-600">男</div>
                            </label>
                            <label class="flex-1">
                                <input type="radio" name="gender" class="hidden-input">
                                <div class="w-full text-center p-3 border-2 border-gray-300 rounded-lg cursor-pointer font-medium text-gray-600">女</div>
                            </label>
                        </div>
                    </label>
                    <label class="block">
                        <span class="text-gray-700 font-medium">生日</span>
                        <input type="date" class="w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-500">
                    </label>
                    <!-- *** 新增：选择地区 *** -->
                    <label class="block">
                        <span class="text-gray-700 font-medium">选择地区</span>
                        <select class="w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 text-gray-500">
                            <option value="">请选择国家</option>
                            <option value="CN">中国</option>
                            <option value="US">美国</option>
                            <option value="FR">法国</option>
                            <option value="UK">英国</option>
                        </select>
                    </label>
                    <!-- *** 结束新增 *** -->
                    <label class="block">
                        <span class="text-gray-700 font-medium">身高 (cm)</span>
                        <input type="number" placeholder="例如: 175" class="w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </label>
                    <label class="block">
                        <span class="text-gray-700 font-medium">体重 (kg)</span>
                        <input type="number" placeholder="例如: 70" class="w-full mt-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </label>

                    <!-- *** 修复: 多选改用 Checkbox *** -->
                    <label class="block">
                        <span class="text-gray-700 font-medium">训练目的 (多选)</span>
                        <div class="grid grid-cols-2 gap-3 mt-2">
                            <label><input type="checkbox" class="hidden-input"><div class="w-full text-center p-3 border-2 border-gray-300 rounded-lg cursor-pointer font-medium text-gray-600">塑形减脂</div></label>
                            <label><input type="checkbox" class="hidden-input"><div class="w-full text-center p-3 border-2 border-gray-300 rounded-lg cursor-pointer font-medium text-gray-600">力量增肌</div></label>
                            <label><input type="checkbox" class="hidden-input"><div class="w-full text-center p-3 border-2 border-gray-300 rounded-lg cursor-pointer font-medium text-gray-600">运动康复</div></label>
                            <label><input type="checkbox" class="hidden-input"><div class="w-full text-center p-3 border-2 border-gray-300 rounded-lg cursor-pointer font-medium text-gray-600">普拉提</div></label>
                        </div>
                    </label>
                    <label class="block">
                        <span class="text-gray-700 font-medium">训练基础 (多选)</span>
                        <div class="grid grid-cols-2 gap-3 mt-2">
                            <label><input type="checkbox" class="hidden-input"><div class="w-full text-center p-3 border-2 border-gray-300 rounded-lg cursor-pointer font-medium text-gray-600">零基础</div></label>
                            <label><input type="checkbox" class="hidden-input"><div class="w-full text-center p-3 border-2 border-gray-300 rounded-lg cursor-pointer font-medium text-gray-600">有经验</div></label>
                            <label><input type="checkbox" class="hidden-input"><div class="w-full text-center p-3 border-2 border-gray-300 rounded-lg cursor-pointer font-medium text-gray-600">专业</div></label>
                        </div>
                    </label>
                </div>
                
                <button onclick="registerStep2()" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg mt-8 mb-4 hover:bg-blue-700 transition duration-300">
                    完成
                </button>
            </div>

            <!-- ======================= -->
            <!-- 页面 5: 注册 - 步骤 3 (P7) -->
            <!-- ======================= -->
            <div id="page-register-success" class="page flex-col p-6 h-full justify-center items-center">
                <div class="w-32 h-32 bg-green-500 rounded-full flex items-center justify-center shadow-lg">
                    <svg class="w-20 h-20 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg>
                </div>
                <h1 class="text-2xl font-bold text-gray-900 mt-6">注册成功!</h1>
                <p class="text-gray-500 mt-2">即将跳转至首页...</p>
            </div>
            
            <!-- ======================= -->
            <!-- 页面 6: 首页 (P11) -->
            <!-- ======================= -->
            <div id="page-home" class="page flex-col h-full">
                <!-- 首页内容区 -->
                <div class="flex-1 overflow-y-auto mobile-screen">
                    
                    <!-- 顶部信息 -->
                    <div class="p-6 bg-white">
                        <div class="flex justify-between items-center">
                            <div>
                                <h2 class="text-xl font-bold text-gray-900">欢迎回来, Jack</h2>
                                <p class="text-sm text-gray-500">2025年11月2日</p>
                            </div>
                            <img onclick="setActiveTab('me')" src="https://placehold.co/40x40/E2E8F0/94A3B8?text=User" class="w-10 h-10 rounded-full cursor-pointer">
                        </div>
                        
                        <!-- 数据卡片 -->
                        <div class="mt-6 bg-blue-600 text-white p-5 rounded-xl shadow-lg">
                            <p class="text-sm opacity-80">今日运动数据</p>
                            <div class="flex justify-between items-end mt-2">
                                <div>
                                    <span class="text-3xl font-bold">3h 26min</span>
                                    <p class="text-sm">运动时长</p>
                                </div>
                                <div>
                                    <span class="text-2xl font-bold">1391</span>
                                    <span class="text-sm opacity-80">Kcal</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 快捷入口 -->
                        <div class="grid grid-cols-4 gap-4 text-center mt-6">
                            <a href="#" class="text-gray-700">
                                <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                                </div>
                                <span class="text-xs font-medium mt-2 block">日历</span>
                            </a>
                            <a href="#" class="text-gray-700">
                                <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341A6.002 6.002 0 006 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path></svg>
                                </div>
                                <span class="text-xs font-medium mt-2 block">消息</span>
                            </a>
                            <a href="#" class="text-gray-700">
                                <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6V4m0 2a2 2 0 100 4 2 2 0 000-4zm0 0a2 2 0 110 4 2 2 0 010-4zm0 0a2 2 0 100 4 2 2 0 000-4zm0 0a2 2 0 110 4 2 2 0 010-4zM6 18v-2m0 2a2 2 0 100-4 2 2 0 000 4zm0 0a2 2 0 110-4 2 2 0 010 4zm0 0a2 2 0 100-4 2 2 0 000 4zm0 0a2 2 0 110-4 2 2 0 010-4zm6-6v-2m0 2a2 2 0 100-4 2 2 0 000 4zm0 0a2 2 0 110-4 2 2 0 010 4zm0 0a2 2 0 100-4 2 2 0 000 4zm0 0a2 2 0 110-4 2 2 0 010-4zm6 6v-2m0 2a2 2 0 100-4 2 2 0 000 4zm0 0a2 2 0 110-4 2 2 0 010 4zm0 0a2 2 0 100-4 2 2 0 000 4zm0 0a2 2 0 110-4 2 2 0 010-4z"></path></svg>
                                </div>
                                <span class="text-xs font-medium mt-2 block">设置</span>
                            </a>
                            <a href="#" class="text-gray-700">
                                <div class="w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto">
                                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4s-1.79 4-4 4c-1.742 0-3.223-.835-3.772-2"></path></svg>
                                </div>
                                <span class="text-xs font-medium mt-2 block">其它</span>
                            </a>
                        </div>
                    </div>
                    
                    <!-- 主内容区 -->
                    <div class="p-6 space-y-6">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-bold text-gray-900">推荐课程</h3>
                            <a onclick="goToCourses()" class="text-sm text-blue-600 cursor-pointer">查看全部</a>
                        </div>
                        
                        <!-- *** 新增: 轮播图 *** -->
                        <div class="h-40 rounded-xl slider-container relative shadow-lg">
                            <div class="slider-slide active h-40">
                                <img src="https://placehold.co/600x400/a7f3d0/166534?text=普拉提-专注" class="w-full h-full object-cover rounded-xl">
                                <div class="absolute bottom-4 left-4 p-2 bg-black bg-opacity-50 rounded">
                                    <span class="font-bold text-white">燃脂普拉提</span>
                                </div>
                            </div>
                            <div class="slider-slide h-40">
                                <img src="https://placehold.co/600x400/bae6fd/0c4a6e?text=瑜伽-伸展" class="w-full h-full object-cover rounded-xl">
                                <div class="absolute bottom-4 left-4 p-2 bg-black bg-opacity-50 rounded">
                                    <span class="font-bold text-white">晨间伸展</span>
                                </div>
                            </div>
                            <div class="slider-slide h-40">
                                <img src="https://placehold.co/600x400/fecdd3/8c1d1d?text=力量-核心" class="w-full h-full object-cover rounded-xl">
                                <div class="absolute bottom-4 left-4 p-2 bg-black bg-opacity-50 rounded">
                                    <span class="font-bold text-white">核心力量</span>
                                </div>
                            </div>
                        </div>
                        <!-- *** 结束新增 *** -->

                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-bold text-gray-900">最新活动</h3>
                            <a href="#" class="text-sm text-blue-600">查看全部</a>
                        </div>
                        <div class="h-32 bg-gray-100 rounded-xl p-4 flex items-end shadow">
                            <span class="font-bold text-gray-700">冬季挑战赛</span>
                        </div>
                        
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-bold text-gray-900">我的计划</h3>
                            <a onclick="goToCourses()" class="text-sm text-blue-600 cursor-pointer">加入计划</a>
                        </div>
                        <div class="h-32 bg-gray-100 rounded-xl p-4 flex items-end shadow">
                            <span class="font-bold text-gray-700">四周力量进阶</span>
                        </div>
                    </div>

                </div>

                <!-- 底部 Tab 导航栏 -->
                <div class="flex-shrink-0 h-16 bg-white border-t border-gray-200 flex justify-around items-center">
                    <button id="tab-home" onclick="setActiveTab('home')" class="flex flex-col items-center justify-center text-blue-600">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"><path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"></path></svg>
                        <span class="text-xs font-medium">首页</span>
                    </button>
                    <button id="tab-course" onclick="setActiveTab('course')" class="flex flex-col items-center justify-center text-gray-500">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                        <span class="text-xs font-medium">课程</span>
                    </button>
                    <button id="tab-me" onclick="setActiveTab('me')" class="flex flex-col items-center justify-center text-gray-500">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>
                        <span class="text-xs font-medium">我的</span>
                    </button>
                </div>
            </div>

            <!-- ======================= -->
            <!-- 页面 X: 课程库 (列表) -->
            <!-- ======================= -->
            <div id="page-course" class="page flex-col h-full">
                <!-- 顶部栏：返回首页 + 标题 -->
                <div class="flex-shrink-0 h-12 bg-white border-b border-gray-100 flex items-center px-4">
                    <svg onclick="setActiveTab('home')" class="w-6 h-6 text-gray-500 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    <div class="ml-2 font-bold text-gray-900">全部训练</div>
                </div>
                <!-- 顶部：搜索与分类 Tab -->
                <div class="flex-shrink-0 p-4 bg-white border-b border-gray-100">
                    <div class="flex items-center space-x-2">
                        <div class="flex-1">
                            <input type="search" placeholder="搜索课程/计划/动作" class="w-full p-2.5 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" />
                        </div>
                    </div>
                    <div class="mt-3 grid grid-cols-4 text-center text-sm font-medium">
                        <button id="course-tab-course" class="py-2 bg-blue-600 text-white rounded-l-lg" onclick="switchCourseCategory('course')">课程</button>
                        <button id="course-tab-action" class="py-2 bg-gray-50 text-gray-700 border-t border-b" onclick="switchCourseCategory('action')">动作</button>
                        <button id="course-tab-plan" class="py-2 bg-gray-50 text-gray-700 border-t border-b" onclick="switchCourseCategory('plan')">计划</button>
                        <button id="course-tab-fav" class="py-2 bg-gray-50 text-gray-700 rounded-r-lg border" onclick="switchCourseCategory('fav')">收藏</button>
                    </div>
                    <div class="mt-2 flex justify-end">
                        <button onclick="toggleFilterDrawer(true)" class="px-3 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50">筛选</button>
                    </div>
                </div>

                <!-- 列表区 -->
                <div class="flex-1 overflow-y-auto p-4 space-y-3" id="list-course" >
                    <!-- 课程卡片示例 -->
                    <div class="bg-white rounded-xl shadow border border-gray-100 overflow-hidden flex" onclick="openCourseDetail('c1')">
                        <div class="w-24 h-24 bg-gray-100 flex items-center justify-center">
                            <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7l9-4 9 4-9 4-9-4zM3 7v10l9 4 9-4V7"></path></svg>
                        </div>
                        <div class="flex-1 p-3">
                            <div class="flex items-center justify-between">
                                <h3 class="font-semibold text-gray-900">课程名称</h3>
                                <div class="flex items-center space-x-1">
                                    <span class="text-xs px-1.5 py-0.5 bg-yellow-100 text-yellow-700 rounded">中级</span>
                                    <span class="text-xs px-1.5 py-0.5 bg-purple-100 text-purple-700 rounded">普拉提</span>
                                </div>
                            </div>
                            <div class="mt-1 text-xs text-gray-500">33min · 217kcal</div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow border border-gray-100 overflow-hidden flex" onclick="openCourseDetail('c2')">
                        <div class="w-24 h-24 bg-gray-100 flex items-center justify-center">
                            <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7l9-4 9 4-9 4-9-4zM3 7v10l9 4 9-4V7"></path></svg>
                        </div>
                        <div class="flex-1 p-3">
                            <div class="flex items-center justify-between">
                                <h3 class="font-semibold text-gray-900">力量训练·核心</h3>
                                <div class="flex items-center space-x-1">
                                    <span class="text-xs px-1.5 py-0.5 bg-red-100 text-red-700 rounded">高级</span>
                                    <span class="text-xs px-1.5 py-0.5 bg-blue-100 text-blue-700 rounded">有氧混合</span>
                                </div>
                            </div>
                            <div class="mt-1 text-xs text-gray-500">45min · 320kcal</div>
                        </div>
                    </div>
                </div>

                <!-- 动作列表 -->
                <div class="flex-1 overflow-y-auto p-4 space-y-3 hidden" id="list-action">
                    <div class="bg-white rounded-xl shadow border border-gray-100 overflow-hidden flex" onclick="openActionDetail('a1')">
                        <div class="w-24 h-24 bg-gray-100 flex items-center justify-center">
                            <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7l9-4 9 4-9 4-9-4zM3 7v10l9 4 9-4V7"></path></svg>
                        </div>
                        <div class="flex-1 p-3">
                            <div class="flex items-center justify-between">
                                <h3 class="font-semibold text-gray-900">动作名称</h3>
                                <div class="flex items-center space-x-1">
                                    <span class="text-xs px-1.5 py-0.5 bg-green-100 text-green-700 rounded">初级</span>
                                    <span class="text-xs px-1.5 py-0.5 bg-sky-100 text-sky-700 rounded">肩部</span>
                                    <span class="text-xs px-1.5 py-0.5 bg-purple-100 text-purple-700 rounded">普拉提</span>
                                </div>
                            </div>
                            <div class="mt-1 text-xs text-gray-500">器械：手柄 · 目标：三角肌</div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow border border-gray-100 overflow-hidden flex" onclick="openActionDetail('a2')">
                        <div class="w-24 h-24 bg-gray-100 flex items-center justify-center">
                            <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7l9-4 9 4-9 4-9-4zM3 7v10l9 4 9-4V7"></path></svg>
                        </div>
                        <div class="flex-1 p-3">
                            <div class="flex items-center justify-between">
                                <h3 class="font-semibold text-gray-900">动作名称</h3>
                                <div class="flex items-center space-x-1">
                                    <span class="text-xs px-1.5 py-0.5 bg-yellow-100 text-yellow-700 rounded">中级</span>
                                    <span class="text-xs px-1.5 py-0.5 bg-orange-100 text-orange-700 rounded">胸部</span>
                                    <span class="text-xs px-1.5 py-0.5 bg-blue-100 text-blue-700 rounded">力量训练</span>
                                </div>
                            </div>
                            <div class="mt-1 text-xs text-gray-500">器械：红铃 · 目标：胸大肌</div>
                        </div>
                    </div>
                </div>

                <!-- 计划列表 -->
                <div class="flex-1 overflow-y-auto p-4 space-y-3 hidden" id="list-plan">
                    <div class="bg-white rounded-xl shadow border border-gray-100 overflow-hidden flex" onclick="openPlanDetail('p1')">
                        <div class="w-24 h-24 bg-gray-100 flex items-center justify-center">
                            <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7l9-4 9 4-9 4-9-4zM3 7v10l9 4 9-4V7"></path></svg>
                        </div>
                        <div class="flex-1 p-3">
                            <div class="flex items-center justify-between">
                                <h3 class="font-semibold text-gray-900">计划名称</h3>
                                <div class="flex items-center space-x-1">
                                    <span class="text-xs px-1.5 py-0.5 bg-red-100 text-red-700 rounded">高级</span>
                                    <span class="text-xs px-1.5 py-0.5 bg-pink-100 text-pink-700 rounded">有氧混合</span>
                                    <span class="text-xs px-1.5 py-0.5 bg-indigo-100 text-indigo-700 rounded">4周</span>
                                </div>
                            </div>
                            <div class="mt-1 text-xs text-gray-500">每周训练：3次</div>
                        </div>
                    </div>
                    <div class="bg-white rounded-xl shadow border border-gray-100 overflow-hidden flex" onclick="openPlanDetail('p2')">
                        <div class="w-24 h-24 bg-gray-100 flex items-center justify-center">
                            <svg class="w-10 h-10 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7l9-4 9 4-9 4-9-4zM3 7v10l9 4 9-4V7"></path></svg>
                        </div>
                        <div class="flex-1 p-3">
                            <div class="flex items-center justify-between">
                                <h3 class="font-semibold text-gray-900">计划名称</h3>
                                <div class="flex items-center space-x-1">
                                    <span class="text-xs px-1.5 py-0.5 bg-green-100 text-green-700 rounded">初级</span>
                                    <span class="text-xs px-1.5 py-0.5 bg-cyan-100 text-cyan-700 rounded">拉伸恢复</span>
                                    <span class="text-xs px-1.5 py-0.5 bg-indigo-100 text-indigo-700 rounded">3周</span>
                                </div>
                            </div>
                            <div class="mt-1 text-xs text-gray-500">每周训练：2次</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ======================= -->
            <!-- 页面 X: 课程详情 -->
            <!-- ======================= -->
            <div id="page-course-detail" class="page flex-col h-full">
                <div class="flex-shrink-0 p-4 bg-white border-b border-gray-100 flex items-center space-x-3">
                    <svg onclick="showPage('page-course')" class="w-6 h-6 text-gray-500 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    <h1 class="text-xl font-bold text-gray-900">课程详情</h1>
                    <button class="ml-auto" onclick="toggleFavorite(this)">
                        <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 21.364l-7.682-7.682a4.5 4.5 0 010-6.364z"></path></svg>
                    </button>
                </div>
                <div class="flex-1 overflow-y-auto">
                    <div class="p-4">
                        <div class="h-40 bg-gray-100 rounded-xl flex items-center justify-center shadow">
                            <svg class="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7l9-4 9 4-9 4-9-4zM3 7v10l9 4 9-4V7"></path></svg>
                        </div>

                        <div class="mt-4 flex items-center space-x-2">
                            <h2 class="text-lg font-bold text-gray-900">课程名称</h2>
                            <span class="text-xs px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded">中级</span>
                            <span class="text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded">力量训练</span>
                        </div>
                        <div class="mt-1 text-sm text-gray-600 flex space-x-6">
                            <span>33min</span>
                            <span>1090kg</span>
                            <span>217kcal</span>
                        </div>

                        <div class="mt-4">
                            <h3 class="font-semibold text-gray-900">器械</h3>
                            <div class="mt-2 flex flex-wrap gap-2">
                                <span class="text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded">红铃</span>
                                <span class="text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded">健身凳</span>
                            </div>
                        </div>

                        <div class="mt-4">
                            <h3 class="font-semibold text-gray-900">动作介绍</h3>
                            <p class="text-sm text-gray-600 mt-2">通过复合动作提升核心稳定与下肢力量，注意控制节奏与呼吸。</p>
                        </div>

                        <div class="mt-4">
                            <h3 class="font-semibold text-gray-900">训练部位</h3>
                            <div class="mt-2 flex flex-wrap gap-2">
                                <span class="text-xs px-2 py-0.5 bg-orange-100 text-orange-700 rounded">核心</span>
                                <span class="text-xs px-2 py-0.5 bg-pink-100 text-pink-700 rounded">臀大肌</span>
                                <span class="text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded">斜方肌</span>
                            </div>
                        </div>

                        <div class="mt-4">
                            <h3 class="font-semibold text-gray-900">训练安排</h3>
                            <div class="mt-2 space-y-2">
                                <div class="bg-white border border-gray-200 rounded-lg p-3 flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-gray-100 rounded"></div>
                                    <div class="flex-1">
                                        <div class="text-sm font-medium text-gray-900">动作名称</div>
                                        <div class="text-xs text-gray-500">1.02.00</div>
                                    </div>
                                </div>
                                <div class="bg-white border border-gray-200 rounded-lg p-3 flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-gray-100 rounded"></div>
                                    <div class="flex-1">
                                        <div class="text-sm font-medium text-gray-900">动作名称</div>
                                        <div class="text-xs text-gray-500">2.02.00</div>
                                    </div>
                                </div>
                                <div class="bg-white border border-gray-200 rounded-lg p-3 flex items-center space-x-3">
                                    <div class="w-10 h-10 bg-gray-100 rounded"></div>
                                    <div class="flex-1">
                                        <div class="text-sm font-medium text-gray-900">动作名称</div>
                                        <div class="text-xs text-gray-500">2.02.00</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex-shrink-0 p-4 bg-white border-t">
                    <button onclick="openScheduleOverlay()" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg hover:bg-blue-700 transition">加入日程</button>
                </div>
            </div>

            <!-- ======================= -->
            <!-- 页面 X: 动作详情 -->
            <!-- ======================= -->
            <div id="page-action-detail" class="page flex-col h-full">
                <div class="flex-shrink-0 p-4 bg-white border-b border-gray-100 flex items-center space-x-3">
                    <svg onclick="showPage('page-course')" class="w-6 h-6 text-gray-500 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    <h1 class="text-xl font-bold text-gray-900">动作详情</h1>
                    <button class="ml-auto" onclick="toggleFavorite(this)">
                        <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 21.364l-7.682-7.682a4.5 4.5 0 010-6.364z"></path></svg>
                    </button>
                </div>
                <div class="flex-1 overflow-y-auto">
                    <div class="p-4">
                        <div class="h-40 bg-gray-100 rounded-xl flex items-center justify-center shadow">
                            <svg class="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7l9-4 9 4-9 4-9-4zM3 7v10l9 4 9-4V7"></path></svg>
                        </div>
                        <div class="mt-4 flex items-center space-x-2">
                            <h2 class="text-lg font-bold text-gray-900">动作名称</h2>
                            <span class="text-xs px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded">中级</span>
                            <span class="text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded">力量训练</span>
                            <span class="text-xs px-2 py-0.5 bg-sky-100 text-sky-700 rounded">肩部</span>
                        </div>
                        <div class="mt-4">
                            <h3 class="font-semibold text-gray-900">动作介绍</h3>
                            <p class="text-sm text-gray-600 mt-2">说明动作起始姿势、发力顺序与节奏控制，演示常见错误。</p>
                        </div>
                        <div class="mt-4">
                            <h3 class="font-semibold text-gray-900">训练部位</h3>
                            <div class="mt-2 flex flex-wrap gap-2">
                                <span class="text-xs px-2 py-0.5 bg-orange-100 text-orange-700 rounded">胸大肌</span>
                                <span class="text-xs px-2 py-0.5 bg-pink-100 text-pink-700 rounded">三角肌</span>
                                <span class="text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded">背阔肌</span>
                            </div>
                        </div>
                        <div class="mt-4">
                            <h3 class="font-semibold text-gray-900">器械</h3>
                            <div class="mt-2 flex flex-wrap gap-2">
                                <span class="text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded">红铃</span>
                                <span class="text-xs px-2 py-0.5 bg-green-100 text-green-700 rounded">健身凳</span>
                            </div>
                        </div>
                        <div class="mt-4">
                            <h3 class="font-semibold text-gray-900">安装示意</h3>
                            <div class="mt-2 w-24 h-16 bg-gray-100 rounded"></div>
                        </div>
                        <div class="mt-4">
                            <h3 class="font-semibold text-gray-900">错误要点</h3>
                            <div class="mt-2 text-sm text-gray-600">常见代偿、幅度过大、摆动发力等。</div>
                        </div>
                        <div class="mt-4 mb-6">
                            <h3 class="font-semibold text-gray-900">呼吸建议</h3>
                            <div class="mt-2 text-sm text-gray-600">离心吸气、向心呼气；保持核心收紧。</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ======================= -->
            <!-- 页面 X: 计划详情 -->
            <!-- ======================= -->
            <div id="page-plan-detail" class="page flex-col h-full">
                <div class="flex-shrink-0 p-4 bg-white border-b border-gray-100 flex items-center space-x-3">
                    <svg onclick="showPage('page-course')" class="w-6 h-6 text-gray-500 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    <h1 class="text-xl font-bold text-gray-900">计划详情</h1>
                    <button class="ml-auto" onclick="toggleFavorite(this)">
                        <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 21.364l-7.682-7.682a4.5 4.5 0 010-6.364z"></path></svg>
                    </button>
                </div>
                <div class="flex-1 overflow-y-auto">
                    <div class="p-4">
                        <div class="h-40 bg-gray-100 rounded-xl flex items-center justify-center shadow">
                            <svg class="w-16 h-16 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7l9-4 9 4-9 4-9-4zM3 7v10l9 4 9-4V7"></path></svg>
                        </div>
                        <div class="mt-4 flex items-center space-x-2">
                            <h2 class="text-lg font-bold text-gray-900">计划名称</h2>
                            <span class="text-xs px-2 py-0.5 bg-yellow-100 text-yellow-700 rounded">中级</span>
                            <span class="text-xs px-2 py-0.5 bg-blue-100 text-blue-700 rounded">力量训练</span>
                            <span class="text-xs px-2 py-0.5 bg-indigo-100 text-indigo-700 rounded">3周</span>
                            <span class="text-xs px-2 py-0.5 bg-gray-100 text-gray-700 rounded">每周3次</span>
                        </div>
                        <div class="mt-4">
                            <h3 class="font-semibold text-gray-900">计划介绍</h3>
                            <p class="text-sm text-gray-600 mt-2">说明整体目标、周结构与注意事项。</p>
                        </div>
                        <div class="mt-4">
                            <h3 class="font-semibold text-gray-900">计划安排</h3>
                            <div class="mt-2 space-y-2">
                                <!-- 第1周：展示1-7天 每天课程示例 -->
                                <div class="bg-white border border-gray-200 rounded p-3">
                                    <div class="text-sm font-medium text-gray-900 mb-2">第1周</div>
                                    <div class="grid grid-cols-7 gap-2 text-center text-xs">
                                        <div class="border rounded p-2">
                                            <div class="text-gray-500 mb-1">第1天</div>
                                            <div class="flex flex-col gap-1">
                                                <span class="px-1 py-0.5 rounded bg-blue-50 text-blue-700">热身</span>
                                                <span class="px-1 py-0.5 rounded bg-orange-50 text-orange-700">核心力量</span>
                                            </div>
                                        </div>
                                        <div class="border rounded p-2">
                                            <div class="text-gray-500 mb-1">第2天</div>
                                            <div class="flex flex-col gap-1">
                                                <span class="px-1 py-0.5 rounded bg-green-50 text-green-700">拉伸恢复</span>
                                            </div>
                                        </div>
                                        <div class="border rounded p-2">
                                            <div class="text-gray-500 mb-1">第3天</div>
                                            <div class="flex flex-col gap-1">
                                                <span class="px-1 py-0.5 rounded bg-purple-50 text-purple-700">上肢力量</span>
                                            </div>
                                        </div>
                                        <div class="border rounded p-2">
                                            <div class="text-gray-500 mb-1">第4天</div>
                                            <div class="flex flex-col gap-1">
                                                <span class="px-1 py-0.5 rounded bg-cyan-50 text-cyan-700">有氧混合</span>
                                            </div>
                                        </div>
                                        <div class="border rounded p-2">
                                            <div class="text-gray-500 mb-1">第5天</div>
                                            <div class="flex flex-col gap-1">
                                                <span class="px-1 py-0.5 rounded bg-amber-50 text-amber-700">下肢训练</span>
                                            </div>
                                        </div>
                                        <div class="border rounded p-2">
                                            <div class="text-gray-500 mb-1">第6天</div>
                                            <div class="flex flex-col gap-1">
                                                <span class="px-1 py-0.5 rounded bg-rose-50 text-rose-700">普拉提</span>
                                            </div>
                                        </div>
                                        <div class="border rounded p-2">
                                            <div class="text-gray-500 mb-1">第7天</div>
                                            <div class="flex flex-col gap-1">
                                                <span class="px-1 py-0.5 rounded bg-gray-100 text-gray-700">休息</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-white border border-gray-200 rounded p-3">
                                    <div class="text-sm font-medium text-gray-900">第2周</div>
                                </div>
                                <div class="bg-white border border-gray-200 rounded p-3">
                                    <div class="text-sm font-medium text-gray-900">第3周</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="flex-shrink-0 p-4 bg-white border-t">
                    <button onclick="openPlanSetupOverlay()" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg hover:bg-blue-700 transition">加入计划</button>
                </div>
            </div>

            <!-- ======================= -->
            <!-- 抽屉：课程筛选 -->
            <!-- ======================= -->
            <div id="drawer-filter" class="hidden absolute inset-0 z-30">
                <div class="absolute inset-0 bg-black bg-opacity-30" onclick="toggleFilterDrawer(false)"></div>
                <div id="drawer-filter-sheet" class="absolute inset-x-0 bottom-0 bg-white rounded-t-2xl shadow-xl p-4 overflow-y-auto transform translate-y-full transition-transform duration-200 ease-out max-h-[80%]">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-bold text-gray-900">筛选</h3>
                        <button class="text-gray-500" onclick="toggleFilterDrawer(false)">关闭</button>
                    </div>
                    <div id="filter-content" class="mt-2 max-h-[65vh] overflow-y-auto"></div>
                    <div class="mt-6 flex space-x-3">
                        <button class="flex-1 border border-gray-300 rounded-lg py-2 text-gray-700" onclick="resetFilters()">重置</button>
                        <button class="flex-1 bg-blue-600 text-white rounded-lg py-2" onclick="applyFilters()">确定</button>
                    </div>
                </div>
            </div>

            <!-- ======================= -->
            <!-- 弹层：加入日程（日历） -->
            <!-- ======================= -->
            <div id="overlay-schedule" class="hidden absolute inset-0 z-40">
                <div class="absolute inset-0 bg-black bg-opacity-30" onclick="closeScheduleOverlay()"></div>
                <div id="overlay-schedule-sheet" class="absolute inset-x-0 bottom-0 bg-white rounded-t-2xl shadow-2xl p-4 transform translate-y-full transition-transform duration-200 ease-out">
                    <div class="flex items-center justify-between">
                        <h3 class="text-lg font-bold text-gray-900">选择日期</h3>
                        <button class="text-gray-500" onclick="closeScheduleOverlay()">关闭</button>
                    </div>
                    <div class="mt-3">
                        <div id="calendar" class="grid grid-cols-7 gap-2 text-center text-sm text-gray-700"></div>
                    </div>
                    <div class="mt-4 flex items-center">
                        <div class="w-14 h-10 bg-gray-100 rounded mr-3"></div>
                        <div class="text-sm text-gray-700">课程名称 · <span id="schedule-date-text" class="font-medium">未选择</span></div>
                    </div>
                    <div class="mt-4">
                        <button onclick="confirmAddToSchedule()" id="btn-add-schedule" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg disabled:opacity-50" disabled>加入日程</button>
                    </div>
                </div>
            </div>

            <!-- ======================= -->
            <!-- 弹层：计划设置（进入计划） -->
            <!-- ======================= -->
            <div id="overlay-plan-setup" class="hidden absolute inset-0 z-40">
                <div class="absolute inset-0 bg-black bg-opacity-30" onclick="closePlanSetupOverlay()"></div>
                <div id="overlay-plan-sheet" class="absolute inset-x-0 bottom-0 bg-white rounded-t-2xl shadow-2xl p-4 transform translate-y-full transition-transform duration-200 ease-out">
                    <div class="text-lg font-bold text-gray-900">计划设置</div>
                    <div class="mt-3">
                        <div class="text-sm text-gray-700 mb-2">希望计划开始的时间</div>
                        <div class="grid grid-cols-2 gap-2">
                            <button class="px-3 py-2 border rounded" onclick="selectPlanStart('today', this)">今天</button>
                            <button class="px-3 py-2 border rounded" onclick="selectPlanStart('tomorrow', this)">明天</button>
                        </div>
                    </div>
                    <div class="mt-4">
                        <div class="text-sm text-gray-700 mb-2">请选择每周的训练日</div>
                        <div id="plan-days" class="grid grid-cols-7 gap-2">
                            <button class="px-2 py-2 border rounded" data-day="1">一</button>
                            <button class="px-2 py-2 border rounded" data-day="2">二</button>
                            <button class="px-2 py-2 border rounded" data-day="3">三</button>
                            <button class="px-2 py-2 border rounded" data-day="4">四</button>
                            <button class="px-2 py-2 border rounded" data-day="5">五</button>
                            <button class="px-2 py-2 border rounded" data-day="6">六</button>
                            <button class="px-2 py-2 border rounded" data-day="7">日</button>
                        </div>
                    </div>
                    <div class="mt-4">
                        <button id="btn-enter-plan" class="w-full bg-blue-600 text-white font-bold py-3 rounded-lg" onclick="confirmEnterPlan()">加入计划</button>
                    </div>
                </div>
            </div>

            <!-- 轻提示：收藏/操作成功 -->
            <div id="app-toast" class="hidden absolute left-1/2 -translate-x-1/2 bottom-24 bg-black text-white text-sm px-3 py-2 rounded-lg shadow"></div>

            <!-- ======================= -->
            <!-- 页面：设置 -->
            <!-- ======================= -->
            <div id="page-settings" class="page flex-col h-full">
                <div class="flex-shrink-0 h-12 bg-white border-b border-gray-100 flex items-center px-4">
                    <svg onclick="showPage('page-me')" class="w-6 h-6 text-gray-500 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    <div class="ml-2 font-bold text-gray-900">设置</div>
                </div>
                <div class="flex-1 overflow-y-auto p-4 space-y-3">
                    <button class="w-full p-4 bg-white border rounded-lg text-left" onclick="showToast('账号管理（演示）')">账号管理</button>
                    <button class="w-full p-4 bg-white border rounded-lg text-left" onclick="showToast('配件设置（演示）')">配件设置</button>
                    <button class="w-full p-4 bg-white border rounded-lg text-left" onclick="toggleLanguage()">切换语言</button>
                    <button class="w-full p-4 bg-white border rounded-lg text-left" onclick="showPage('page-settings-others')">其他设置</button>
                    <button class="w-full p-4 bg-white border rounded-lg text-left text-red-600" onclick="logout()">退出登录</button>
                </div>
            </div>

            <!-- ======================= -->
            <!-- 页面：其他设置 -->
            <!-- ======================= -->
            <div id="page-settings-others" class="page flex-col h-full">
                <div class="flex-shrink-0 h-12 bg-white border-b border-gray-100 flex items-center px-4">
                    <svg onclick="showPage('page-settings')" class="w-6 h-6 text-gray-500 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    <div class="ml-2 font-bold text-gray-900">其他设置</div>
                </div>
                <div class="flex-1 overflow-y-auto p-4 space-y-3">
                    <button class="w-full p-4 bg-white border rounded-lg text-left" onclick="clearCache()">清除缓存数据</button>
                    <button class="w-full p-4 bg-white border rounded-lg text-left" onclick="showToast('请在官网查看协议与政策')">协议与政策</button>
                    <button class="w-full p-4 bg-white border rounded-lg text-left" onclick="factoryReset()">恢复出厂设置</button>
                    <div class="w-full p-4 bg-white border rounded-lg flex items-center justify-between" onclick="checkUpdate()"><span>版本更新</span><span class="text-gray-500">V1.0.0</span></div>
                    <div class="w-full p-4 bg-white border rounded-lg flex items-center justify-between" onclick="checkFirmware()"><span>固件升级</span><span class="text-gray-500">5.0.0</span></div>
                </div>
            </div>

            <!-- ======================= -->
            <!-- 页面 7: 忘记密码 (补全) -->
            <!-- ======================= -->
            <div id="page-forgot" class="page flex-col p-6 h-full">
                <svg onclick="showPage('page-login')" class="w-6 h-6 text-gray-500 cursor-pointer" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                <h1 class="text-3xl font-bold text-gray-900 mt-4">重置密码</h1>
                
                <!-- *** 新增: 重置方式切换 *** -->
                <div class="my-6 flex border border-gray-200 rounded-lg overflow-hidden">
                    <button id="tab-btn-forgot-phone" onclick="toggleForgotMode('phone')" class="flex-1 py-2 text-sm font-medium bg-blue-600 text-white">手机重置</button>
                    <button id="tab-btn-forgot-email" onclick="toggleForgotMode('email')" class="flex-1 py-2 text-sm font-medium text-gray-600 bg-gray-50 hover:bg-gray-100">邮箱重置</button>
                </div>

                <!-- 手机重置 -->
                <div id="forgot-mode-phone" class="space-y-4">
                    <input type="tel" placeholder="请输入手机号" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div class="flex space-x-2">
                        <input type="text" placeholder="请输入验证码" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button onclick="startCountdown(this)" class="flex-shrink-0 w-32 bg-gray-200 text-gray-700 text-sm font-medium py-3 px-2 rounded-lg hover:bg-gray-300">获取验证码</button>
                    </div>
                </div>
                
                <!-- 邮箱重置 -->
                <div id="forgot-mode-email" class="space-y-4 hidden">
                    <input type="email" placeholder="请输入邮箱" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <div class="flex space-x-2">
                        <input type="text" placeholder="请输入验证码" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <button onclick="startCountdown(this)" class="flex-shrink-0 w-32 bg-gray-200 text-gray-700 text-sm font-medium py-3 px-2 rounded-lg hover:bg-gray-300">获取验证码</button>
                    </div>
                </div>
                <!-- *** 结束新增 *** -->

                <!-- 通用表单 -->
                <div class="space-y-4 mt-4">
                    <input type="password" placeholder="设置新密码 (6-20位)" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <input type="password" placeholder="确认新密码" class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                
                <button onclick="resetPassword()" class="w-full bg-blue-600 text-white font-bold py-3 px-4 rounded-lg shadow-lg mt-8 hover:bg-blue-700 transition duration-300">
                    提交
                </button>
            </div>

            <!-- ======================= -->
            <!-- 页面 8: 计划 (Tab) -->
            <!-- ======================= -->
            <div id="page-plan" class="page flex-col p-6 h-full justify-center items-center">
                <h1 class="text-2xl font-bold text-gray-800">计划页面</h1>
                <p class="text-gray-500 mt-2">这里是用户的训练计划列表</p>
                <button onclick="setActiveTab('home')" class="text-sm text-blue-600 hover:underline mt-4">返回首页</button>
            </div>

            <!-- ======================= -->
            <!-- 页面 9: 发现 (Tab) -->
            <!-- ======================= -->
            <div id="page-discover" class="page flex-col p-6 h-full justify-center items-center">
                <h1 class="text-2xl font-bold text-gray-800">发现页面</h1>
                <p class="text-gray-500 mt-2">这里是社区、文章、活动等内容</p>
                <button onclick="setActiveTab('home')" class="text-sm text-blue-600 hover:underline mt-4">返回首页</button>
            </div>
            
            <!-- ======================= -->
            <!-- 页面 10: 我的 (Tab) -->
            <!-- ======================= -->
            <div id="page-me" class="page flex-col h-full">
                <!-- 顶部信息 -->
                <div class="flex-shrink-0 p-6 bg-white border-b border-gray-100 flex items-center">
                    <img src="https://placehold.co/64x64/E2E8F0/94A3B8?text=U" class="w-16 h-16 rounded-full">
                    <div class="ml-4">
                        <div class="text-lg font-bold text-gray-900">当前登录用户</div>
                        <div class="text-sm text-gray-500">已训练xxx天</div>
                    </div>
                    <button class="ml-auto px-3 py-2 text-sm border rounded-lg" onclick="showPage('page-settings')">设置</button>
                </div>

                <div class="flex-1 overflow-y-auto">
                    <div class="p-6 space-y-6">
                        <!-- 本周运动打卡 -->
                        <div>
                            <div class="text-sm text-gray-500 mb-2">本周运动打卡</div>
                            <div class="flex space-x-3">
                                <span class="w-8 h-8 rounded-full bg-blue-50 text-blue-700 text-xs flex items-center justify-center">20</span>
                                <span class="w-8 h-8 rounded-full bg-blue-50 text-blue-700 text-xs flex items-center justify-center">21</span>
                                <span class="w-8 h-8 rounded-full bg-blue-600 text-white text-xs flex items-center justify-center">22</span>
                                <span class="w-8 h-8 rounded-full bg-blue-50 text-blue-700 text-xs flex items-center justify-center">23</span>
                                <span class="w-8 h-8 rounded-full bg-blue-50 text-blue-700 text-xs flex items-center justify-center">24</span>
                                <span class="w-8 h-8 rounded-full bg-blue-50 text-blue-700 text-xs flex items-center justify-center">25</span>
                                <span class="w-8 h-8 rounded-full bg-blue-50 text-blue-700 text-xs flex items-center justify-center">26</span>
                            </div>
                        </div>

                        <!-- 近7日运动数据 -->
                        <div class="grid grid-cols-3 gap-3">
                            <div class="bg-white rounded-xl p-4 border text-center">
                                <div class="text-xs text-gray-500">运动时长</div>
                                <div class="text-lg font-bold text-gray-900 mt-1">3h24min</div>
                            </div>
                            <div class="bg-white rounded-xl p-4 border text-center">
                                <div class="text-xs text-gray-500">运动容量</div>
                                <div class="text-lg font-bold text-gray-900 mt-1">1500kg</div>
                            </div>
                            <div class="bg-white rounded-xl p-4 border text-center">
                                <div class="text-xs text-gray-500">运动消耗</div>
                                <div class="text-lg font-bold text-gray-900 mt-1">1500kcal</div>
                            </div>
                        </div>

                        <!-- 我的训练快捷入口 -->
                        <div>
                            <div class="text-sm text-gray-500 mb-2">我的训练</div>
                            <div class="grid grid-cols-4 gap-3">
                                <button class="bg-white rounded-xl p-3 border text-center" onclick="goFavorites()">
                                    <div class="w-8 h-8 bg-gray-100 rounded mx-auto mb-2"></div>
                                    <div class="text-xs">我的收藏</div>
                                </button>
                                <button class="bg-white rounded-xl p-3 border text-center" onclick="goMyPlan()">
                                    <div class="w-8 h-8 bg-gray-100 rounded mx-auto mb-2"></div>
                                    <div class="text-xs">我的计划</div>
                                </button>
                                <button class="bg-white rounded-xl p-3 border text-center" onclick="goMyTraining()">
                                    <div class="w-8 h-8 bg-gray-100 rounded mx-auto mb-2"></div>
                                    <div class="text-xs">我的训练</div>
                                </button>
                                <button class="bg-white rounded-xl p-3 border text-center" onclick="showToast('我的成就（演示）')">
                                    <div class="w-8 h-8 bg-gray-100 rounded mx-auto mb-2"></div>
                                    <div class="text-xs">我的成就</div>
                                </button>
                            </div>
                        </div>

                        <!-- 其它入口 -->
                        <div class="space-y-3">
                            <button class="w-full text-left p-4 bg-gray-100 rounded-lg font-medium text-gray-700">账号管理（开发中）</button>
                            <button class="w-full text-left p-4 bg-gray-100 rounded-lg font-medium text-gray-700">配件设置（开发中）</button>
                            <button class="w-full text-left p-4 bg-gray-100 rounded-lg font-medium text-gray-700" onclick="showPage('page-settings')">设置</button>
                        </div>

                        <button onclick="logout()" class="w-full bg-red-500 text-white font-bold py-3 px-4 rounded-lg shadow-lg hover:bg-red-600 transition duration-300">退出登录</button>
                    </div>
                </div>
            </div>
            
            <!-- 占位符，用于撑开 flex-1 -->
            <div class="flex-grow"></div>
        </div>

    </div>

    <script>
        let currentPage = 'page-welcome';
        let currentHomeTab = 'page-home';
        let currentLoginTab = 'phone';
        let currentRegisterTab = 'phone';
        let currentForgotTab = 'phone'; // 新增：忘记密码的 Tab 状态
        let sliderInterval; // 轮播图定时器

        // 核心函数：显示指定 ID 的页面
        function showPage(pageId) {
            // 隐藏当前页面
            if (currentPage) {
                const oldPage = document.getElementById(currentPage);
                if (oldPage) oldPage.classList.remove('active');
            }
            
            // 显示新页面
            const newPage = document.getElementById(pageId);
            if (newPage) {
                newPage.classList.add('active');
                currentPage = pageId;

                // 特殊逻辑: 注册成功页自动跳转
                if (pageId === 'page-register-success') {
                    setTimeout(() => {
                        showPage('page-home');
                    }, 2000); // 2秒后跳转
                }
                
                // 特殊逻辑: 进入首页时启动轮播
                if (pageId === 'page-home') {
                    startSlider();
                } else {
                    // 离开首页时停止轮播
                    if (sliderInterval) {
                        clearInterval(sliderInterval);
                    }
                }
            }
        }
        
        // 登录页：切换登录模式 (手机/密码/邮箱)
        function toggleLoginMode(mode) {
            if (currentLoginTab === mode) return;

            // 切换 Tab 按钮样式
            document.getElementById(`tab-btn-phone`).classList.toggle('bg-blue-600', mode === 'phone');
            document.getElementById(`tab-btn-phone`).classList.toggle('text-white', mode === 'phone');
            document.getElementById(`tab-btn-phone`).classList.toggle('bg-gray-50', mode !== 'phone');
            document.getElementById(`tab-btn-phone`).classList.toggle('text-gray-600', mode !== 'phone');
            
            document.getElementById(`tab-btn-password`).classList.toggle('bg-blue-600', mode === 'password');
            document.getElementById(`tab-btn-password`).classList.toggle('text-white', mode === 'password');
            document.getElementById(`tab-btn-password`).classList.toggle('bg-gray-50', mode !== 'password');
            document.getElementById(`tab-btn-password`).classList.toggle('text-gray-600', mode !== 'password');

            document.getElementById(`tab-btn-email`).classList.toggle('bg-blue-600', mode === 'email');
            document.getElementById(`tab-btn-email`).classList.toggle('text-white', mode === 'email');
            document.getElementById(`tab-btn-email`).classList.toggle('bg-gray-50', mode !== 'email');
            document.getElementById(`tab-btn-email`).classList.toggle('text-gray-600', mode !== 'email');
            
            // 切换表单内容
            document.getElementById(`mode-phone`).classList.toggle('hidden', mode !== 'phone');
            document.getElementById(`mode-password`).classList.toggle('hidden', mode !== 'password');
            document.getElementById(`mode-email`).classList.toggle('hidden', mode !== 'email');
            
            currentLoginTab = mode;
        }

        // 注册页：切换注册模式 (手机/邮箱)
        function toggleRegisterMode(mode) {
            if (currentRegisterTab === mode) return;

            document.getElementById(`tab-btn-reg-phone`).classList.toggle('bg-blue-600', mode === 'phone');
            document.getElementById(`tab-btn-reg-phone`).classList.toggle('text-white', mode === 'phone');
            document.getElementById(`tab-btn-reg-phone`).classList.toggle('bg-gray-50', mode !== 'phone');
            document.getElementById(`tab-btn-reg-phone`).classList.toggle('text-gray-600', mode !== 'phone');

            document.getElementById(`tab-btn-reg-email`).classList.toggle('bg-blue-600', mode === 'email');
            document.getElementById(`tab-btn-reg-email`).classList.toggle('text-white', mode === 'email');
            document.getElementById(`tab-btn-reg-email`).classList.toggle('bg-gray-50', mode !== 'email');
            document.getElementById(`tab-btn-reg-email`).classList.toggle('text-gray-600', mode !== 'email');

            document.getElementById(`reg-mode-phone`).classList.toggle('hidden', mode !== 'phone');
            document.getElementById(`reg-mode-email`).classList.toggle('hidden', mode !== 'email');
            
            currentRegisterTab = mode;
        }

        // *** 新增：忘记密码页：切换模式 ***
        function toggleForgotMode(mode) {
            if (currentForgotTab === mode) return;

            document.getElementById(`tab-btn-forgot-phone`).classList.toggle('bg-blue-600', mode === 'phone');
            document.getElementById(`tab-btn-forgot-phone`).classList.toggle('text-white', mode === 'phone');
            document.getElementById(`tab-btn-forgot-phone`).classList.toggle('bg-gray-50', mode !== 'phone');
            document.getElementById(`tab-btn-forgot-phone`).classList.toggle('text-gray-600', mode !== 'phone');

            document.getElementById(`tab-btn-forgot-email`).classList.toggle('bg-blue-600', mode === 'email');
            document.getElementById(`tab-btn-forgot-email`).classList.toggle('text-white', mode === 'email');
            document.getElementById(`tab-btn-forgot-email`).classList.toggle('bg-gray-50', mode !== 'email');
            document.getElementById(`tab-btn-forgot-email`).classList.toggle('text-gray-600', mode !== 'email');

            document.getElementById(`forgot-mode-phone`).classList.toggle('hidden', mode !== 'phone');
            document.getElementById(`forgot-mode-email`).classList.toggle('hidden', mode !== 'email');
            
            currentForgotTab = mode;
        }

        // 首页：切换底部 Tab
        function setActiveTab(tabName) {
            const tabs = ['home', 'course', 'me'];
            let targetPageId = '';

            tabs.forEach(tab => {
                const button = document.getElementById(`tab-${tab}`);
                if (tab === tabName) {
                    button.classList.remove('text-gray-500');
                    button.classList.add('text-blue-600');
                    targetPageId = `page-${tab}`;
                } else {
                    button.classList.add('text-gray-500');
                    button.classList.remove('text-blue-600');
                }
            });

            // 切换 Tab 对应的页面
            // 隐藏当前 Home Tab 页面
            if (currentHomeTab) {
                document.getElementById(currentHomeTab).classList.remove('active');
            }
            // 显示新 Tab 页面
            document.getElementById(targetPageId).classList.add('active');
            currentHomeTab = targetPageId;
            currentPage = targetPageId; // 更新全局页面ID

            // 切换 Tab 时停止轮播
            if (sliderInterval) {
                clearInterval(sliderInterval);
            }
            // 如果切换回首页，则重启轮播
            if (targetPageId === 'page-home') {
                startSlider();
            }
        }

        // 首页入口跳转到课程库
        function goToCourses() {
            // 激活底部课程 Tab 并显示课程页
            const tabButton = document.getElementById('tab-course');
            if (tabButton) {
                setActiveTab('course');
            } else {
                showPage('page-course');
            }
        }

        // 我的：快捷入口联动
        function goFavorites() {
            goToCourses();
            switchCourseCategory('fav');
        }
        function goMyPlan() {
            goToCourses();
            switchCourseCategory('plan');
        }
        function goMyTraining() {
            goToCourses();
            switchCourseCategory('course');
        }

        // 模拟：验证码倒计时
        function startCountdown(button) {
            let seconds = 60;
            button.disabled = true;
            button.textContent = `60s 后重试`;
            
            const interval = setInterval(() => {
                seconds--;
                if (seconds > 0) {
                    button.textContent = `${seconds}s 后重试`;
                } else {
                    clearInterval(interval);
                    button.disabled = false;
                    button.textContent = `获取验证码`;
                }
            }, 1000);
        }

        // 模拟：登录
        function login() {
            // 1. 校验协议
            const agreed = document.getElementById('agree-login').checked;
            if (!agreed) {
                alert('请先阅读并同意用户协议和隐私政策');
                return;
            }
            // 2. (模拟) API 调用
            console.log('正在登录...');
            // 3. 登录成功
            showPage('page-home');
            // 确保首页 Tab 激活
            setActiveTab('home');
        }

        // 模拟：注册步骤1
        function registerStep1() {
            const agreed = document.getElementById('agree-register').checked;
            if (!agreed) {
                alert('请先阅读并同意用户协议和隐私政策');
                return;
            }
            console.log('注册信息提交...');
            showPage('page-register-step2');
        }

        // 模拟：注册步骤2
        function registerStep2() {
            console.log('个人资料提交...');
            showPage('page-register-success');
        }
        
        // 模拟：重置密码
        function resetPassword() {
            alert('密码重置成功！（模拟）');
            showPage('page-login');
        }
        
        // 模拟：退出登录
        function logout() {
            showPage('page-welcome');
            // 重置登录页状态
            toggleLoginMode('phone');
            // 重置忘记密码页状态
            toggleForgotMode('phone');
        }
        
        // *** 新增：轮播图逻辑 ***
        let slideIndex = 0;
        function startSlider() {
            if (sliderInterval) {
                clearInterval(sliderInterval);
            }
            slideIndex = 0; // 重置索引，进入首页时从第一张开始
            showSlides();
            sliderInterval = setInterval(showSlides, 3000); // 每3秒切换一次
        }

        function showSlides() {
            const slides = document.querySelectorAll('.slider-slide');
            if (slides.length === 0) return;
            
            // 隐藏所有
            slides.forEach(slide => {
                slide.classList.remove('active');
            });

            // 计算下一个
            slideIndex++;
            if (slideIndex > slides.length) {
                slideIndex = 1;
            }
            
            // 显示当前
            slides[slideIndex - 1].classList.add('active');
        }
        // *** 结束新增 ***

        // 页面加载完毕后，默认显示欢迎页
        document.addEventListener('DOMContentLoaded', () => {
            // 确保所有页面先隐藏
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            // 仅显示欢迎页
            document.getElementById('page-welcome').classList.add('active');
            
            // 自动勾选复选框（仅为演示方便）
            document.getElementById('agree-login').checked = true;
            document.getElementById('agree-register').checked = true;

            // 处理复选框的视觉效果
            document.querySelectorAll('.hidden-input[type="checkbox"]').forEach(input => {
                input.addEventListener('change', (e) => {
                    const checkIcon = e.target.nextElementSibling.querySelector('svg');
                    if (checkIcon) {
                        checkIcon.classList.toggle('hidden', !e.target.checked);
                    }
                });
                // 初始加载时同步状态
                const checkIcon = input.nextElementSibling.querySelector('svg');
                if (checkIcon) {
                    checkIcon.classList.toggle('hidden', !input.checked);
                }
            });
        });

        // ==========================
        // 课程：分类切换
        // ==========================
        function switchCourseCategory(cat) {
            const ids = ['course', 'action', 'plan', 'fav'];
            ids.forEach(id => {
                const btn = document.getElementById(`course-tab-${id}`);
                if (!btn) return;
                if (id === cat) {
                    btn.classList.remove('bg-gray-50', 'text-gray-700', 'border', 'border-t', 'border-b');
                    btn.classList.add('bg-blue-600', 'text-white');
                } else {
                    btn.classList.add('bg-gray-50', 'text-gray-700');
                    btn.classList.remove('bg-blue-600', 'text-white');
                }
            });

            // 列表可见性
            const listIds = ['list-course','list-action','list-plan'];
            listIds.forEach(lid => {
                const el = document.getElementById(lid);
                if (!el) return;
                el.classList.toggle('hidden', !lid.includes(cat));
            });

            // 根据分类渲染筛选内容
            renderFilter(cat);
        }

        // ==========================
        // 课程：筛选抽屉
        // ==========================
        function toggleFilterDrawer(open) {
            const drawer = document.getElementById('drawer-filter');
            const sheet = document.getElementById('drawer-filter-sheet');
            if (!drawer || !sheet) return;
            if (open) {
                drawer.classList.remove('hidden');
                // 下一帧启动过渡
                requestAnimationFrame(() => {
                    sheet.classList.remove('translate-y-full');
                });
            } else {
                sheet.classList.add('translate-y-full');
                setTimeout(() => drawer.classList.add('hidden'), 200);
            }
        }
        function resetFilters() {
            // 清空已选（示意）
            document.querySelectorAll('#drawer-filter .chip').forEach(b => b.classList.remove('ring-2', 'ring-blue-500'));
        }
        function applyFilters() {
            toggleFilterDrawer(false);
        }

        // 渲染不同分类的筛选内容
        function renderFilter(cat) {
            const container = document.getElementById('filter-content');
            if (!container) return;
            const group = (title, chips) => `
                <div class="mt-4">
                    <div class="text-sm font-medium text-gray-700">${title}</div>
                    <div class="mt-2 grid grid-cols-2 gap-2">
                        ${chips.map(c => `<button class=\"chip px-3 py-2 rounded border border-gray-300 text-gray-700\" onclick=\"this.classList.toggle('ring-2');this.classList.toggle('ring-blue-500');\">${c}</button>`).join('')}
                    </div>
                </div>`;
            let html = '';
            if (cat === 'course') {
                html += group('类型', ['力量训练','普拉提','有氧混合','拉伸恢复']);
                html += group('难度', ['初级','中级','高级']);
                html += group('配件', ['健身凳','手柄','阻力带','杠铃/铃']);
            } else if (cat === 'action') {
                html += group('类型', ['力量训练','普拉提','有氧减脂','拉伸恢复']);
                html += group('难度', ['初级','中级','高级']);
                html += group('训练部位', ['胸部','肩部','背部','臀部','腿部','手臂','腹部','全身']);
                html += group('训练肌群', ['肱二头肌','胸大肌','腹肌','三角肌前束','肱三头肌','竖脊肌','背阔肌','三角肌中束','三角肌后束']);
                html += group('配件', ['健身凳','折叠凳','划船类','手柄','杠铃/铃','双头绳','阻扣','负重带']);
            } else if (cat === 'plan') {
                html += group('类型', ['力量训练','普拉提','有氧混合','拉伸恢复']);
                html += group('难度', ['初级','中级','高级']);
                html += group('计划时长', ['3周','4周','5周']);
            } else {
                html = '<div class="text-sm text-gray-500 mt-4">暂无可筛选内容</div>';
            }
            container.innerHTML = html;
        }

        // ==========================
        // 课程：详情
        // ==========================
        function openCourseDetail(id) {
            showPage('page-course-detail');
        }
        function openActionDetail(id) {
            showPage('page-action-detail');
        }
        function openPlanDetail(id) {
            showPage('page-plan-detail');
        }

        // ==========================
        // 日历：加入日程
        // ==========================
        function openScheduleOverlay() {
            buildCalendar();
            document.getElementById('btn-add-schedule').disabled = true;
            document.getElementById('schedule-date-text').textContent = '未选择';
            const overlay = document.getElementById('overlay-schedule');
            const sheet = document.getElementById('overlay-schedule-sheet');
            overlay.classList.remove('hidden');
            requestAnimationFrame(() => sheet.classList.remove('translate-y-full'));
        }
        function closeScheduleOverlay() {
            const overlay = document.getElementById('overlay-schedule');
            const sheet = document.getElementById('overlay-schedule-sheet');
            sheet.classList.add('translate-y-full');
            setTimeout(() => overlay.classList.add('hidden'), 200);
        }
        function buildCalendar() {
            const calendar = document.getElementById('calendar');
            if (!calendar) return;
            calendar.innerHTML = '';
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth();
            const firstDay = new Date(year, month, 1);
            const startWeekday = firstDay.getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            // 前导空白
            for (let i = 0; i < startWeekday; i++) {
                const blank = document.createElement('div');
                calendar.appendChild(blank);
            }
            for (let d = 1; d <= daysInMonth; d++) {
                const btn = document.createElement('button');
                btn.textContent = d.toString();
                btn.className = 'py-2 rounded hover:bg-gray-100';
                btn.onclick = () => selectScheduleDate(year, month + 1, d, btn);
                calendar.appendChild(btn);
            }
        }
        function selectScheduleDate(y, m, d, el) {
            document.querySelectorAll('#calendar button').forEach(b => b.classList.remove('bg-blue-600', 'text-white'));
            el.classList.add('bg-blue-600', 'text-white');
            const text = `${y}-${String(m).padStart(2,'0')}-${String(d).padStart(2,'0')}`;
            document.getElementById('schedule-date-text').textContent = text;
            document.getElementById('btn-add-schedule').disabled = false;
        }
        function confirmAddToSchedule() {
            closeScheduleOverlay();
            showToast('已加入日程');
        }

        // 计划设置弹层
        function openPlanSetupOverlay() {
            const overlay = document.getElementById('overlay-plan-setup');
            const sheet = document.getElementById('overlay-plan-sheet');
            overlay.classList.remove('hidden');
            requestAnimationFrame(() => sheet.classList.remove('translate-y-full'));
            // 可多选训练日
            document.querySelectorAll('#plan-days button').forEach(b => {
                b.onclick = () => b.classList.toggle('bg-blue-600') || b.classList.toggle('text-white');
            });
        }
        function closePlanSetupOverlay() {
            const overlay = document.getElementById('overlay-plan-setup');
            const sheet = document.getElementById('overlay-plan-sheet');
            sheet.classList.add('translate-y-full');
            setTimeout(() => overlay.classList.add('hidden'), 200);
        }
        function selectPlanStart(v, el) {
            // 单选开始时间
            document.querySelectorAll('#overlay-plan-setup [onclick^="selectPlanStart"]').forEach(b => b.classList.remove('bg-blue-600','text-white'));
            el.classList.add('bg-blue-600','text-white');
        }
        function confirmEnterPlan() {
            closePlanSetupOverlay();
            showToast('已进入计划');
        }

        // 收藏
        function toggleFavorite(btn) {
            const svg = btn.querySelector('svg');
            if (!svg) return;
            const isActive = svg.getAttribute('fill') === 'currentColor';
            if (isActive) {
                svg.setAttribute('fill','none');
                svg.classList.remove('text-red-500');
                showToast('已取消收藏');
            } else {
                svg.setAttribute('fill','currentColor');
                svg.classList.add('text-red-500');
                showToast('已收藏');
            }
        }

        // 轻提示
        function showToast(text) {
            const el = document.getElementById('app-toast');
            if (!el) return;
            el.textContent = text;
            el.classList.remove('hidden');
            el.style.opacity = '1';
            setTimeout(() => {
                el.style.opacity = '0';
                setTimeout(() => el.classList.add('hidden'), 200);
            }, 1200);
        }

        // 设置：交互
        function toggleLanguage() {
            showToast('语言已切换（演示）');
        }
        function clearCache() {
            if (confirm('确定清除缓存数据？')) {
                showToast('已清除缓存');
            }
        }
        function factoryReset() {
            if (confirm('确定恢复出厂设置？此操作不可撤销')) {
                showToast('已恢复出厂设置');
            }
        }
        function checkUpdate() { showToast('已是最新版本'); }
        function checkFirmware() { showToast('已是最新固件'); }

    </script>
</body>
</html>

